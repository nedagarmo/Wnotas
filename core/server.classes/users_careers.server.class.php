<?php/** * Clase de servidor que ejecuta operaciones crud sobre la tabla. * * @author Nelson D. Garzón M. */extract($_REQUEST);include_once(dirname(__FILE__) . '/../data.access.objects/users_careers.dao.class.php');$dao = new users_careers();$jtable_result = array();switch ($action) {    case "create":        if ($dao->get_users_count_career($usuario, $carrera)->fields[0] == 0) {            $result = $dao->insert_users_career($usuario, $carrera);            if ($result) {                $jtable_result['Result'] = "OK";                $jtable_result['Record'] = $dao->get_users_career($usuario, $carrera)->fields;            } else {                $jtable_result['Result'] = "ERROR";                $jtable_result['Message'] = "No se guardaron los datos en el sistema.";            }        }else{            $jtable_result['Result'] = "ERROR";            $jtable_result['Message'] = "El usuario ya está matriculado a esta carrera.";        }        break;    case "update":        $result = $dao->update_users_career($id, $usuario, $carrera);        if ($result) {            $jtable_result['Result'] = "OK";        } else {            $jtable_result['Result'] = "ERROR";            $jtable_result['Message'] = "No se guardaron los datos en el sistema.";        }        break;    case "delete":        $result = $dao->delete_users_career($id);        if ($result) {            $jtable_result['Result'] = "OK";        } else {            $jtable_result['Result'] = "ERROR";            $jtable_result['Message'] = "No se pudo eliminar el registro del sistema.";        }        break;    case "search":        if (empty($user) && empty($career)) {            $result = $dao->get_all_users_careers($jtSorting, $jtStartIndex, $jtPageSize);        } else {            $result = $dao->get_users_careers_search($user, $career, $jtSorting, $jtStartIndex, $jtPageSize);        }        if ($result != null) {            $rows = array();            while (!$result->EOF) {                $rows[] = $result->fields;                $result->MoveNext();            }            $jtable_result['Result'] = "OK";            $jtable_result['Records'] = $rows;            $jtable_result['TotalRecordCount'] = $dao->get_all_count_users_careers()->fields[0];        } else {            $jtable_result['Result'] = "ERROR";            $jtable_result['Message'] = "No se encontraron datos en el sistema.";        }        break;    default:        $jtable_result['Result'] = "ERROR";        $jtable_result['Message'] = "El sistema ha identificado un error en los parametros. Utilice la interfaz desarrollada para usted.";        break;}print json_encode($jtable_result);?>
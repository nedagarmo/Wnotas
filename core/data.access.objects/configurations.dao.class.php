<?php/* 	  Clase de métodos de inserción, modificación, eliminación y consulta sobre la tabla carreras * * @author Nelson D. Garzón M. */@session_start();include_once(dirname(__FILE__) . '/../data.bases/connection.mysql.class.php');include_once(dirname(__FILE__) . '/audit.dao.class.php');class configurations {    private $conn;    private $audit;    function configurations() {        $this->conn = new connection();        $this->audit = new audit();    }    function get_all_count_configurations() {        $record_set = $this->conn->db->Execute('SELECT COUNT(*) FROM configuracion');        if ($record_set != false) {            return $record_set;        } else {            return null;        }    }    function get_all_configurations($order, $index, $page) {        $record_set = $this->conn->db->Execute('SELECT * FROM configuracion ORDER BY ' . $order . ' LIMIT ' . $index . ',' . $page);        if ($record_set != false) {            return $record_set;        } else {            return null;        }    }    function get_all_configurations_vars() {        $record_set = $this->conn->db->Execute('SELECT * FROM configuracion');        if ($record_set != false) {            return $record_set;        } else {            return null;        }    }    function get_configuration($name) {        $record_set = $this->conn->db->Execute('SELECT * FROM configuracion WHERE nombre = ?', array($name));        if ($record_set != false) {            return $record_set;        } else {            return null;        }    }    function get_configuration_search($name = "", $order, $index, $page) {        if (!empty($name)) {            $record_set = $this->conn->db->Execute('SELECT * FROM configuracion WHERE CONCAT(nombre," ",descripcion) LIKE ? ORDER BY ' . $order . ' LIMIT ' . $index . ',' . $page, array("%" . $name . "%"));        } else {            $record_set = $this->conn->db->Execute('SELECT * FROM configuracion ORDER BY ' . $order . ' LIMIT ' . $index . ',' . $page);        }        if ($record_set != false) {            return $record_set;        } else {            return null;        }    }    function insert_configuration($name, $description, $value) {        $this->audit->register_audit(1, 'INSERT INTO configuracion(nombre, descripcion, valor) VALUES(?,?,?) ', $_SESSION['id']);        return $this->conn->db->Execute('INSERT INTO configuracion(nombre, descripcion, valor) VALUES(?,?,?) ', array($name, $description, $value));    }    function update_configuration($id, $name, $description, $value) {        $this->audit->register_audit(2, 'UPDATE configuracion SET nombre = ?, descripcion = ?, valor = ? WHERE id = ?', $_SESSION['id']);        return $this->conn->db->Execute('UPDATE configuracion SET nombre = ?, descripcion = ?, valor = ? WHERE id = ? ', array($name, $description, $value, $id));    }    function delete_configuration($id) {        $this->audit->register_audit(3, 'DELETE FROM configuracion WHERE id = ?', $_SESSION['id']);        return $this->conn->db->Execute('DELETE FROM configuracion WHERE id = ?', array($id));    }}?>
<?php/* 	 * Clase de métodos de inserción, modificación, eliminación y consulta sobre la tabla carreras * @author Nelson D. Garzón M. */@session_start();include_once(dirname(__FILE__) . '/../data.bases/connection.mysql.class.php');include_once(dirname(__FILE__) . '/audit.dao.class.php');class payments {    private $conn;    private $audit;    public $last_insert_id;    function payments() {        $this->conn = new connection();        $this->audit = new audit();    }    function get_all_count_payments($uc) {        $record_set = $this->conn->db->Execute('SELECT COUNT(*) FROM pago WHERE usuario_carrera = ? ', array($uc));        if ($record_set != false) {            return $record_set;        } else {            return null;        }    }        function get_payment($id) {        $record_set = $this->conn->db->Execute('SELECT * FROM pago WHERE id = ?', array($id));        if ($record_set != false) {            return $record_set;        } else {            return null;        }    }    function get_all_payments($uc, $order, $index, $page) {        $record_set = $this->conn->db->Execute('SELECT * FROM pago WHERE usuario_carrera = ? ORDER BY ' . $order . ' LIMIT ' . $index . ',' . $page, array($uc));        if ($record_set != false) {            return $record_set;        } else {            return null;        }    }    function insert_payment($value, $observation, $uc) {        $this->audit->register_audit(1, 'INSERT INTO pago(valor, observacion, usuario_carrera, fecha) VALUES(?,?,?,CURDATE()) ', $_SESSION['id']);        $response = $this->conn->db->Execute('INSERT INTO pago(valor, observacion, usuario_carrera, fecha) VALUES(?,?,?,CURDATE()) ', array($value, $observation, $uc));        $this->last_insert_id = $this->conn->db->Insert_ID();        return $response;    }    function update_payment($id, $value, $observation, $uc) {        $this->audit->register_audit(2, 'UPDATE pago SET valor = ?, observacion = ? WHERE id = ?', $_SESSION['id']);        return $this->conn->db->Execute('UPDATE pago SET valor = ?, observacion = ? WHERE id = ? ', array($value, $observation, $id));    }    function delete_payment($id) {        $this->audit->register_audit(3, 'DELETE FROM pago WHERE id = ?', $_SESSION['id']);        return $this->conn->db->Execute('DELETE FROM pago WHERE id = ?', array($id));    }}?>
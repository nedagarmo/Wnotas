<?php/*		Clase de métodos de inserción, modificación, eliminación y consulta sobre la tabla carreras * * @author Nelson D. Garzón M.	*/@session_start();include_once(dirname(__FILE__) . '/../data.bases/connection.mysql.class.php');include_once(dirname(__FILE__) . '/audit.dao.class.php');class semesters {    private $conn;	private $audit;        function semesters()    {        $this->conn = new connection();		$this->audit = new audit();            }	function get_all_count_semesters()    {        $record_set = $this->conn->db->Execute('SELECT COUNT(*) FROM semestre');        if($record_set != false)        {            return $record_set;        }  else {            return null;        }    }	    function get_all_semesters($order, $index, $page)    {        $record_set = $this->conn->db->Execute('SELECT * FROM semestre ORDER BY '.$order.' LIMIT '.$index.','.$page);        if($record_set != false)        {            return $record_set;        }  else {            return null;        }    }		function get_all_semesters_list()    {        $record_set = $this->conn->db->Execute('SELECT id, nombre FROM semestre ORDER BY id ASC');        if($record_set != false)        {            return $record_set;        }  else {            return null;        }    }		function get_all_semesters_list_by_career($career)    {        $record_set = $this->conn->db->Execute('SELECT DISTINCT s.id, s.nombre FROM carrera_semestre_materia csm INNER JOIN semestre s ON csm.semestre = s.id WHERE csm.carrera = ? ORDER BY s.id ASC', array($career));        if($record_set != false)        {            return $record_set;        }  else {            return null;        }    }		function get_semester($sigla)    {		$record_set = $this->conn->db->Execute('SELECT * FROM semestre WHERE sigla = ?', array($sigla));			        if($record_set != false)        {            return $record_set;        }  else {            return null;        }     }        function get_semester_search($name = "", $order, $index, $page)    {		if(!empty($name)){			$record_set = $this->conn->db->Execute('SELECT * FROM semestre WHERE CONCAT(nombre," ",sigla) LIKE ? ORDER BY '.$order.' LIMIT '.$index.','.$page, array("%".$name."%"));		}else{			$record_set = $this->conn->db->Execute('SELECT * FROM semestre ORDER BY '.$order.' LIMIT '.$index.','.$page);		}        if($record_set != false)        {            return $record_set;        }  else {            return null;        }     }       function insert_semester($name, $sigla)    {		$this->audit->register_audit(1, 'INSERT INTO semestre(nombre, sigla) VALUES(?,?)', $_SESSION['id']);        return $this->conn->db->Execute('INSERT INTO semestre(nombre, sigla) VALUES(?,?) ', 			   array($name, $sigla));    }		function update_semester($id, $sigla, $name)    {		$this->audit->register_audit(2, 'UPDATE semestre SET nombre = ?, sigla = ? WHERE id = ?', $_SESSION['id']);        return $this->conn->db->Execute('UPDATE semestre SET nombre = ?, sigla = ? WHERE id = ? ', 			   array($name, $sigla, $id));    }        function delete_semester($id)    {		$this->audit->register_audit(3, 'DELETE FROM semestre WHERE id = ?', $_SESSION['id']);        return $this->conn->db->Execute('DELETE FROM semestre WHERE id = ?', array($id));    }}	?>